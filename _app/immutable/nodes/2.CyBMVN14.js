import"../chunks/Bzak7iHL.js";import{a6 as et,al as ft,aB as tt,Z as Pe,a8 as z,T as _t,_ as vt,b as O,e as pt,an as gt,ao as yt,ap as Ke,Y as Fe,$ as ke,U as bt,a0 as mt,a7 as Ge,as as ht,aC as Se,aD as Ne,aq as ge,aE as Ve,ax as kt,aF as Ue,a4 as at,Q as xt,at as nt,au as At,aG as Et,aH as Le,N as Ot,aI as rt,aJ as jt,W as wt,aK as It,a3 as Mt,aL as St,k as Nt,aM as Ct,aN as Tt,aO as Pt,aP as Ft,u as st,aw as it,aQ as Lt,i as D,h as J,A as te,B as $,H as j,f as ye,a as G,E as ae,F as N,G as M,C as pe,aR as de,aS as Re,aT as Ie,c as Rt,s as ot,aU as Bt,ay as se,aA as Ee}from"../chunks/C9brnziC.js";import{a as Dt,l as dt,s as ue,o as Ce,e as be,d as Te}from"../chunks/zsmM9AtP.js";import{i as ut}from"../chunks/de6wT86b.js";import{p as h}from"../chunks/_rOX-0GO.js";function xe(t,e){return e}function Ht(t,e,a){for(var n=t.items,s=[],i=e.length,r=0;r<i;r++)It(e[r].e,s,!0);var c=i>0&&s.length===0&&a!==null;if(c){var m=a.parentNode;Mt(m),m.append(a),n.clear(),Z(t,e[0].prev,e[i-1].next)}St(s,()=>{for(var y=0;y<i;y++){var u=e[y];c||(n.delete(u.k),Z(t,u.prev,u.next)),rt(u.e,!c)}})}function Ae(t,e,a,n,s,i=null){var r=t,c={flags:e,items:new Map,first:null},m=(e&tt)!==0;if(m){var y=t;r=z?Pe(_t(y)):y.appendChild(et())}z&&vt();var u=null,o=!1,f=new Map,I=pt(()=>{var b=a();return xt(b)?b:b==null?[]:at(b)}),p,l;function _(){Yt(l,p,c,f,r,s,e,n,a),i!==null&&(p.length===0?u?nt(u):u=Ge(()=>i(r)):u!==null&&At(u,()=>{u=null}))}ft(()=>{l??(l=Nt),p=O(I);var b=p.length;if(o&&b===0)return;o=b===0;let k=!1;if(z){var v=gt(r)===yt;v!==(b===0)&&(r=Ke(),Pe(r),Fe(!1),k=!0)}if(z){for(var C=null,x,d=0;d<b;d++){if(ke.nodeType===bt&&ke.data===mt){r=ke,k=!0,Fe(!1);break}var g=p[d],A=n(g,d);x=Xe(ke,c,C,null,g,A,d,s,e,a),c.items.set(A,x),C=x}b>0&&Pe(Ke())}if(z)b===0&&i&&(u=Ge(()=>i(r)));else if(ht()){var Y=new Set,X=ge;for(d=0;d<b;d+=1){g=p[d],A=n(g,d);var R=c.items.get(A)??f.get(A);R?(e&(Se|Ne))!==0&&lt(R,g,d,e):(x=Xe(null,c,null,null,g,A,d,s,e,a,!0),f.set(A,x)),Y.add(A)}for(const[L,F]of c.items)Y.has(L)||X.skipped_effects.add(F.e);X.add_callback(_)}else _();k&&Fe(!0),O(I)}),z&&(r=ke)}function Yt(t,e,a,n,s,i,r,c,m){var ne,re,E,S;var y=(r&jt)!==0,u=(r&(Se|Ne))!==0,o=e.length,f=a.items,I=a.first,p=I,l,_=null,b,k=[],v=[],C,x,d,g;if(y)for(g=0;g<o;g+=1)C=e[g],x=c(C,g),d=f.get(x),d!==void 0&&((ne=d.a)==null||ne.measure(),(b??(b=new Set)).add(d));for(g=0;g<o;g+=1){if(C=e[g],x=c(C,g),d=f.get(x),d===void 0){var A=n.get(x);if(A!==void 0){n.delete(x),f.set(x,A);var Y=_?_.next:p;Z(a,_,A),Z(a,A,Y),Be(A,Y,s),_=A}else{var X=p?p.e.nodes_start:s;_=Xe(X,a,_,_===null?a.first:_.next,C,x,g,i,r,m)}f.set(x,_),k=[],v=[],p=_.next;continue}if(u&&lt(d,C,g,r),(d.e.f&Le)!==0&&(nt(d.e),y&&((re=d.a)==null||re.unfix(),(b??(b=new Set)).delete(d))),d!==p){if(l!==void 0&&l.has(d)){if(k.length<v.length){var R=v[0],L;_=R.prev;var F=k[0],q=k[k.length-1];for(L=0;L<k.length;L+=1)Be(k[L],R,s);for(L=0;L<v.length;L+=1)l.delete(v[L]);Z(a,F.prev,q.next),Z(a,_,F),Z(a,q,R),p=R,_=q,g-=1,k=[],v=[]}else l.delete(d),Be(d,p,s),Z(a,d.prev,d.next),Z(a,d,_===null?a.first:_.next),Z(a,_,d),_=d;continue}for(k=[],v=[];p!==null&&p.k!==x;)(p.e.f&Le)===0&&(l??(l=new Set)).add(p),v.push(p),p=p.next;if(p===null)continue;d=p}k.push(d),_=d,p=d.next}if(p!==null||l!==void 0){for(var U=l===void 0?[]:at(l);p!==null;)(p.e.f&Le)===0&&U.push(p),p=p.next;var K=U.length;if(K>0){var T=(r&tt)!==0&&o===0?s:null;if(y){for(g=0;g<K;g+=1)(E=U[g].a)==null||E.measure();for(g=0;g<K;g+=1)(S=U[g].a)==null||S.fix()}Ht(a,U,T)}}y&&Ot(()=>{var B;if(b!==void 0)for(d of b)(B=d.a)==null||B.apply()}),t.first=a.first&&a.first.e,t.last=_&&_.e;for(var ie of n.values())rt(ie.e);n.clear()}function lt(t,e,a,n){(n&Se)!==0&&Ve(t.v,e),(n&Ne)!==0?Ve(t.i,a):t.i=a}function Xe(t,e,a,n,s,i,r,c,m,y,u){var o=(m&Se)!==0,f=(m&Et)===0,I=o?f?kt(s,!1,!1):Ue(s):s,p=(m&Ne)===0?r:Ue(r),l={i:p,v:I,k:i,a:null,e:null,prev:a,next:n};try{if(t===null){var _=document.createDocumentFragment();_.append(t=et())}return l.e=Ge(()=>c(t,I,p,y),z),l.e.prev=a&&a.e,l.e.next=n&&n.e,a===null?u||(e.first=l):(a.next=l,a.e.next=l.e),n!==null&&(n.prev=l,n.e.prev=l.e),l}finally{}}function Be(t,e,a){for(var n=t.next?t.next.e.nodes_start:a,s=e?e.e.nodes_start:a,i=t.e.nodes_start;i!==null&&i!==n;){var r=wt(i);s.before(i),i=r}}function Z(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function ct(t){var e,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=ct(t[e]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function zt(){for(var t,e,a=0,n="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=ct(t))&&(n&&(n+=" "),n+=e);return n}function We(t){return typeof t=="object"?zt(t):t??""}function Gt(t,e,a){var n=t==null?"":""+t;return n===""?null:n}function Je(t,e=!1){var a=e?" !important;":";",n="";for(var s in t){var i=t[s];i!=null&&i!==""&&(n+=" "+s+": "+i+a)}return n}function De(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ut(t,e){if(e){var a="",n,s;if(Array.isArray(e)?(n=e[0],s=e[1]):n=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,r=0,c=!1,m=[];n&&m.push(...Object.keys(n).map(De)),s&&m.push(...Object.keys(s).map(De));var y=0,u=-1;const l=t.length;for(var o=0;o<l;o++){var f=t[o];if(c?f==="/"&&t[o-1]==="*"&&(c=!1):i?i===f&&(i=!1):f==="/"&&t[o+1]==="*"?c=!0:f==='"'||f==="'"?i=f:f==="("?r++:f===")"&&r--,!c&&i===!1&&r===0){if(f===":"&&u===-1)u=o;else if(f===";"||o===l-1){if(u!==-1){var I=De(t.substring(y,u).trim());if(!m.includes(I)){f!==";"&&o++;var p=t.substring(y,o).trim();a+=" "+p+";"}}y=o+1,u=-1}}}}return n&&(a+=Je(n)),s&&(a+=Je(s,!0)),a=a.trim(),a===""?null:a}return t==null?null:String(t)}function qe(t,e,a,n,s,i){var r=t.__className;if(z||r!==a||r===void 0){var c=Gt(a);(!z||c!==t.getAttribute("class"))&&(c==null?t.removeAttribute("class"):t.className=c),t.__className=a}return i}function He(t,e={},a,n){for(var s in a){var i=a[s];e[s]!==i&&(a[s]==null?t.style.removeProperty(s):t.style.setProperty(s,i,n))}}function ee(t,e,a,n){var s=t.__style;if(z||s!==e){var i=Ut(e,n);(!z||i!==t.getAttribute("style"))&&(i==null?t.removeAttribute("style"):t.style.cssText=i),t.__style=e}else n&&(Array.isArray(n)?(He(t,a==null?void 0:a[0],n[0]),He(t,a==null?void 0:a[1],n[1],"important")):He(t,a,n));return n}const Xt=Symbol("is custom element"),qt=Symbol("is html");function W(t){if(z){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var n=t.value;Qe(t,"value",null),t.value=n}if(t.hasAttribute("checked")){var s=t.checked;Qe(t,"checked",null),t.checked=s}}};t.__on_r=a,Ct(a),Dt()}}function Qe(t,e,a,n){var s=Kt(t);z&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=a)&&(e==="loading"&&(t[Tt]=a),t.removeAttribute(e))}function Kt(t){return t.__attributes??(t.__attributes={[Xt]:t.nodeName.includes("-"),[qt]:t.namespaceURI===Pt})}function Q(t,e,a=e){var n=Ft(),s=new WeakSet;dt(t,"input",i=>{var r=i?t.defaultValue:t.value;if(r=Ye(t)?ze(r):r,a(r),ge!==null&&s.add(ge),n&&r!==(r=e())){var c=t.selectionStart,m=t.selectionEnd;t.value=r??"",m!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(m,t.value.length))}}),(z&&t.defaultValue!==t.value||st(e)==null&&t.value)&&(a(Ye(t)?ze(t.value):t.value),ge!==null&&s.add(ge)),it(()=>{var i=e();if(t===document.activeElement){var r=Lt??ge;if(s.has(r))return}Ye(t)&&i===ze(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Ze(t,e,a=e){dt(t,"change",n=>{var s=n?t.defaultChecked:t.checked;a(s)}),(z&&t.defaultChecked!==t.checked||st(e)==null)&&a(t.checked),it(()=>{var n=e();t.checked=!!n})}function Ye(t){var e=t.type;return e==="number"||e==="range"}function ze(t){return t===""?null:+t}function Vt(t){var e=Ue(0);return function(){return arguments.length===1?(D(e,O(e)+1),arguments[0]):(O(e),t())}}const H=J({buttons:[],joysticks:[],lists:[]});var w=Vt(()=>H),Wt=$('<tr><td> </td><td><input type="number" class="svelte-njcpkv"/></td><td><input type="number" class="svelte-njcpkv"/></td><td><input type="number" class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input type="checkbox" class="svelte-njcpkv"/></td><td><input type="checkbox" class="svelte-njcpkv"/></td></tr>'),Jt=$('<input type="number" class="svelte-njcpkv"/><br/>',1),Qt=$('<input type="text" class="svelte-njcpkv"/><br/>',1),Zt=$('<tr><td> </td><td><input type="number" class="svelte-njcpkv"/></td><td></td><td><button>+</button></td><td></td><td><button>+</button></td></tr>'),$t=$("<h2>Configuration</h2> Key Mapping joystick inputs (gamepad -1=all, -2&lt;=disabled) <br/> <table><tbody><tr><td>Name</td><td>Gamepad</td><td>Pad X</td><td>Pad Y</td><td>Key X Pos</td><td>Key X Neg</td><td>Key Y Pos</td><td>Key Y Neg</td><td>Invert X</td><td>Invert Y</td></tr><!></tbody></table> <br/> Buttons:<br/> <table><tbody><tr><td>name</td><td>gamepad</td><td>Pad button</td><td></td><td>key</td><td></td></tr><!></tbody></table>",1);function ea(t,e){te(e,!1),ut();var a=$t(),n=j(ye(a),4),s=N(n),i=j(N(s));Ae(i,1,()=>w().joysticks,xe,(y,u,o)=>{var f=Wt(),I=N(f),p=N(I,!0);M(I);var l=j(I),_=N(l);W(_),M(l);var b=j(l),k=N(b);W(k),M(b);var v=j(b),C=N(v);W(C),M(v);var x=j(v),d=N(x);W(d),M(x);var g=j(x),A=N(g);W(A),M(g);var Y=j(g),X=N(Y);W(X),M(Y);var R=j(Y),L=N(R);W(L),M(R);var F=j(R),q=N(F);W(q),M(F);var U=j(F),K=N(U);W(K),M(U),M(f),pe(()=>ue(p,O(u).name)),Q(_,()=>w().joysticks[o].gamepad,T=>w(w().joysticks[o].gamepad=T)),Q(k,()=>w().joysticks[o].axes_x,T=>w(w().joysticks[o].axes_x=T)),Q(C,()=>w().joysticks[o].axes_y,T=>w(w().joysticks[o].axes_y=T)),Q(d,()=>w().joysticks[o].key_x_pos,T=>w(w().joysticks[o].key_x_pos=T)),Q(A,()=>w().joysticks[o].key_x_neg,T=>w(w().joysticks[o].key_x_neg=T)),Q(X,()=>w().joysticks[o].key_y_pos,T=>w(w().joysticks[o].key_y_pos=T)),Q(L,()=>w().joysticks[o].key_y_neg,T=>w(w().joysticks[o].key_y_neg=T)),Ze(q,()=>w().joysticks[o].invert_x,T=>w(w().joysticks[o].invert_x=T)),Ze(K,()=>w().joysticks[o].invert_y,T=>w(w().joysticks[o].invert_y=T)),G(y,f)}),M(s),M(n);var r=j(n,6),c=N(r),m=j(N(c));Ae(m,1,()=>w().buttons,xe,(y,u,o)=>{var f=Zt(),I=N(f),p=N(I,!0);M(I);var l=j(I),_=N(l);W(_),M(l);var b=j(l);Ae(b,5,()=>O(u).gamepad_buttons,xe,(v,C,x)=>{var d=Jt(),g=ye(d);W(g),de(),Q(g,()=>O(u).gamepad_buttons[x],A=>(O(u).gamepad_buttons[x]=A,Re(()=>w()))),G(v,d)}),M(b);var k=j(b,2);Ae(k,5,()=>O(u).keyboard_keys,xe,(v,C,x)=>{var d=Qt(),g=ye(d);W(g),de(),Q(g,()=>O(u).keyboard_keys[x],A=>(O(u).keyboard_keys[x]=A,Re(()=>w()))),G(v,d)}),M(k),de(),M(f),pe(()=>ue(p,O(u).name)),Q(_,()=>O(u).gamepad,v=>(O(u).gamepad=v,Re(()=>w()))),G(y,f)}),M(c),M(r),G(t,a),ae()}const le=J([]),je=J([]),we=J([]),ce=J([]);function ta(t,e){te(e,!0);let a=h(e,"updateUsingAnimationFrame",3,!1),n=h(e,"updateUsingInterval",3,!0),s=h(e,"timeout",3,1e3/25),i={},r;function c(u){r=u.target.navigator}function m(){if(r){for(let u of r.getGamepads())if(u){for(let o=0;o<u.buttons.length;o++){if(u.buttons[o].pressed&&(je.forEach(f=>f(u,o)),!i[o])){i[o]=!0;for(let f of le)if(f(u,o)===!0)break}i[o]&&!u.buttons[o].pressed&&(i[o]=!1,we.forEach(f=>f(u,o)))}ce.forEach(o=>o(u))}}}function y(){m(),requestAnimationFrame(y)}return Ce(()=>{a()?y():n()&&setInterval(m,s())}),be("gamepadconnected",Ie,c),ae({updateGamepadValues:m})}const fe=J([]),_e=J([]),ve=J([]);function aa(t,e){te(e,!1);let a={},n=r=>{for(let c of fe)if(c(r)===!0)break},s=r=>{a[r.key]||n(r),a[r.key]=!0,_e.forEach(c=>{c(r)})},i=r=>{delete a[r.key],ve.forEach(c=>{c(r)})};ut(),be("keydown",Ie,s),be("keyup",Ie,i),ae()}const na=(t,e)=>Math.sqrt(t**2+e**2),ra=(t,e)=>Math.atan2(e,t),sa=(t,e)=>[t*Math.cos(e),t*Math.sin(e)],ia=(t,e)=>Math.min(Math.max(-e,t),e);function Me(t,e){return t.gamepad===-1||t.gamepad===e.index}function oa(t,e){te(e,!0);let a=h(e,"disabled",3,!1),n=h(e,"onpressed",3,void 0),s=h(e,"onhold",3,void 0),i=h(e,"onrelease",3,void 0),r=h(e,"pressed",15,!1),c=h(e,"input_mapping",19,()=>({name:"",gamepad:-1,gamepad_buttons:[0],keyboard_keys:["e"," "]}));const m=()=>{a()||(r(!0),n()&&n()())},y=()=>{!a()&&s()&&s()()},u=()=>{r(!1),i()&&i()()};Ce(()=>{H.buttons.push(c());const I=H.buttons[H.buttons.length-1];function p(d){return I.keyboard_keys.indexOf(d.key)>-1}function l(d,g){return Me(I,d)?I.gamepad_buttons.indexOf(g)>-1:!1}const _=d=>{p(d)&&m()},b=d=>{p(d)&&u()},k=d=>{p(d)&&y()},v=(d,g)=>{l(d,g)&&m()},C=(d,g)=>{l(d,g)&&u()},x=(d,g)=>{l(d,g)&&y()};return fe.push(_),ve.push(b),_e.push(k),le.push(v),we.push(C),je.push(x),()=>{fe.splice(fe.indexOf(_),1),ve.splice(ve.indexOf(b),1),_e.splice(_e.indexOf(k),1),le.splice(le.indexOf(v),1),we.splice(we.indexOf(C),1),je.splice(je.indexOf(x),1),H.buttons.splice(H.buttons.indexOf(I),1)}});var o=Rt(),f=ye(o);ot(f,()=>e.children??Bt),G(t,o),ae()}const da=(t,e,a,n)=>{e()||(a(!0),n()&&n()())},ua=(t,e,a)=>{e(!1),a()&&a()()};var la=$("<button><!></button>");function Oe(t,e){te(e,!0);let a=h(e,"disabled",3,!1),n=h(e,"onpressed",3,void 0),s=h(e,"onhold",3,void 0),i=h(e,"onrelease",3,void 0),r=h(e,"pressed",7,!1),c=h(e,"style",3,""),m=h(e,"cssclass",3,"vbutton"),y=h(e,"input_mapping",19,()=>({name:"",gamepad:-1,gamepad_buttons:[0],keyboard_keys:["e"," "]}));oa(t,{get disabled(){return a()},get onpressed(){return n()},get onhold(){return s()},get onrelease(){return i()},get input_mapping(){return y()},get pressed(){return r()},set pressed(u){r(u)},children:(u,o)=>{var f=la();f.__pointerdown=[da,a,r,n],f.__pointerup=[ua,r,i];var I=N(f);ot(I,()=>e.children),M(f),pe(()=>{ee(f,c()),qe(f,1,(!a()&&r()?"button_clicked ":"")+m())}),G(u,f)},$$slots:{default:!0}}),ae()}Te(["pointerdown","pointerup"]);var ca=()=>{},fa=$('<div id="joystick_area" class="svelte-7naxxk"><div class="joystick_container svelte-7naxxk"><div class="joystick_back svelte-7naxxk"></div> <div class="joystick_front svelte-7naxxk"></div></div></div>');function $e(t,e){te(e,!0);let a=h(e,"disabled",3,!1),n=h(e,"size",3,100),s=h(e,"backgroundWidth",3,200),i=h(e,"backgroundHeight",3,200),r=h(e,"color",3,"rgb(106, 191, 163)"),c=h(e,"defaultOpacity",3,.5),m=h(e,"activeOpacity",3,.8),y=h(e,"border",3,1),u=h(e,"borderColor",3,"black"),o=h(e,"position",31,()=>J([0,0])),f=h(e,"style",3,"background-color: rgb(215, 219, 221);"),I=h(e,"input_mapping",19,()=>({name:"Virtual Joystick",gamepad:-1,axes_x:0,axes_y:1,key_x_pos:"d",key_x_neg:"a",key_y_pos:"s",key_y_neg:"w",deadzoneX:.05,deadzoneY:.05,invert_x:!1,invert_y:!1}));function p(E){o(E)}const l=n()/2;let _=!1,b=!0,k=se(J(c()));H.joysticks.push(I());const v=H.joysticks[H.joysticks.length-1];function C(E){if(a()||!v.gamepad||!_||!E.target)return;b=!1;const S=E.target.getBoundingClientRect(),B=E.x-S.x,P=E.y-S.y;x(B,P)}function x(E,S){let B=E-s()/2,P=S-i()/2;d(B,P)}function d(E,S){const B=na(E,S),P=ra(E,S);let oe=ia(B,l),V=sa(oe,P),me=V[0]/l,he=V[1]/l;if(Math.abs(me)<v.deadzoneX&&Math.abs(he)<v.deadzoneY){o([0,0]),D(k,c());return}me=Math.abs(me)<1e-6?0:me,he=Math.abs(he)<1e-6?0:he,D(k,m()),o([me,he])}function g(){_=!1,D(k,c()),o([0,0])}let A=[0,0];const Y=E=>{if(a())return;let S=!1;v.key_x_pos==E.key?(A[0]=1,S=!0):v.key_x_neg==E.key&&(A[0]=-1,S=!0),v.key_y_pos==E.key?(A[1]=1,S=!0):v.key_y_neg==E.key&&(A[1]=-1,S=!0),S&&(d(A[0]*l,A[1]*l),b=!1)},X=E=>{let S=!1;(v.key_x_pos==E.key||v.key_x_neg==E.key)&&(A[0]=0,S=!0),(v.key_y_pos==E.key||v.key_y_neg==E.key)&&(A[1]=0,S=!0),S&&(d(A[0]*l,A[1]*l),b=!0)},R=E=>{if(a()||!b||!Me(v,E))return;let S=E.axes[v.axes_x],B=E.axes[v.axes_y];if(v.invert_x&&(S=-S),v.invert_y&&(B=-B),Math.abs(S)<v.deadzoneX&&Math.abs(B)<v.deadzoneY){D(k,c()),o([0,0]);return}D(k,m()),o([S,B])};Ce(()=>(_e.push(Y),ve.push(X),ce.push(R),()=>{_e.splice(_e.indexOf(Y),1),ve.splice(ve.indexOf(X),1),ce.splice(ce.indexOf(R),1),H.joysticks.splice(H.joysticks.indexOf(v),1)}));const L=()=>{a()||(b=!0)};var F=fa();be("pointerup",Ie,g);let q;F.__pointerdown=E=>{a()||(E.stopImmediatePropagation(),_=!0,C(E))},F.__pointerup=L,F.__pointermove=C,F.__touchstart=[ca],F.__touchend=L,F.__pointerout=L;var U=N(F);let K;var T=N(U);let ie;var ne=j(T,2);let re;return M(U),M(F),pe((E,S,B,P)=>{q=ee(F,f(),q,E),K=ee(U,"",K,S),ie=ee(T,"",ie,B),re=ee(ne,"",re,P)},[()=>({width:s()+"px",height:i()+"px"}),()=>({left:(s()-n())/2+"px",top:(i()-n())/2+"px"}),()=>({width:n()+"px",height:n()+"px",background:r(),opacity:O(k),border:y()>0?y()+"px solid "+u():0}),()=>({left:o()[0]*l+"px",top:o()[1]*l+"px","margin-top":l/2+"px","margin-left":l/2+"px",transition:"none",width:l+"px",height:l+"px",background:r(),opacity:O(k),border:y()>0?y()+"px solid "+u():0})]),be("pointerleave",F,L),G(t,F),ae({update:p})}Te(["pointerdown","pointerup","pointermove","touchstart","touchend","pointerout"]);function _a(t,e){te(e,!0);let a=h(e,"disabled",3,!1),n=h(e,"input_mapping",19,()=>({name:"List",gamepad:-1,gamepad_axes:[1],gamepad_axes_sens:.05,gamepad_buttons:[0],gamepad_prev_buttons:[12],gamepad_next_buttons:[13],keyboard_prev_keys:["ArrowUp","w"],keyboard_next_keys:["ArrowDown","s"],keyboard_keys:["e"]}));H.lists.push(n());const s=H.lists[H.lists.length-1];let i=-1;Ce(()=>{const r=y=>{if(!a()){if(n().keyboard_keys.indexOf(y.key)>-1){e.onpressed&&e.onpressed();return}if(n().keyboard_next_keys.indexOf(y.key)>-1){e.changeFocus(1);return}n().keyboard_prev_keys.indexOf(y.key)>-1&&e.changeFocus(-1)}},c=(y,u)=>{if(!(a()||!Me(s,y))){if(n().gamepad_buttons.indexOf(u)>-1){e.onpressed&&e.onpressed();return}if(n().gamepad_next_buttons.indexOf(u)>-1){e.changeFocus(1);return}if(n().gamepad_prev_buttons.indexOf(u)>-1){e.changeFocus(-1);return}}},m=y=>{if(!(a()||!Me(s,y)))for(const u of n().gamepad_axes){const o=y.axes[u];let f=n().gamepad_axes_sens;if(o<-f&&i!=u){e.changeFocus(-1),i=u;continue}if(o>f&&i!=u){e.changeFocus(1),i=u;continue}o<f&&o>-f&&(i=-1)}};return fe.push(r),le.push(c),ce.push(m),()=>{fe.splice(fe.indexOf(r),1),le.splice(le.indexOf(c),1),ce.splice(ce.indexOf(m),1),H.lists.splice(H.lists.indexOf(s),1)}}),ae()}var va=$("<li> </li>"),pa=$("<!> <ul></ul>",1);function ga(t,e){te(e,!0);let a=h(e,"disabled",3,!1),n=h(e,"wrap",3,!0),s=h(e,"style",3,""),i=h(e,"cssclass",3,"vlist"),r=h(e,"selectedIndex",15,0),c=h(e,"focussed",15,0),m=h(e,"input_mapping",19,()=>({name:"List",gamepad:-1,gamepad_axes:[1],gamepad_axes_sens:.05,gamepad_buttons:[0],gamepad_prev_buttons:[12],gamepad_next_buttons:[13],keyboard_prev_keys:["ArrowUp","w"],keyboard_next_keys:["ArrowDown","s"],keyboard_keys:["e"]}));function y(_){let b="";return r()===_&&(b+="selected "),c()===_&&(b+="focussed "),b}function u(_){_>=e.items.length&&(_=n()?0:e.items.length-1),_<0&&(_=n()?e.items.length-1:0),c(_)}function o(_){u(c()+_)}function f(){r(c()),e.onpressed&&e.onpressed()}var I=pa(),p=ye(I);_a(p,{changeFocus:o,onpressed:f,get disabled(){return a()},get input_mapping(){return m()}});var l=j(p,2);Ae(l,21,()=>e.items,xe,(_,b,k)=>{var v=va();v.__pointerdown=()=>{a()||(r(k),f())};var C=N(v,!0);M(v),pe(x=>{qe(v,1,x),ue(C,O(b))},[()=>We(y(k))]),be("pointerenter",v,()=>{a()||c(k)}),G(_,v)}),M(l),pe(()=>{ee(l,s()),qe(l,1,We(i()))}),G(t,I),ae()}Te(["pointerdown"]);function ya(){document.getElementById("main").requestFullscreen()}var ba=$('<div id="sidenav" class="sidenav"><button class="closebtn">&times;</button> <!></div> <main><!><br/> <!> <!> <!> <br/> <br/> <div style="position: absolute; top: 30px; right: 30px;"><!> <div style="max-width: 200px;"> <br/> </div></div> <br/><br/> <!> <!> <br/><br/> <hr/> <button>Fullscreen</button> <div id="nav_modal" class="modal"><div class="modal-content"><!> <br/> <!></div></div></main>',1);function Ea(t,e){te(e,!0);let a=se(J([0,0])),n=se(J([0,0])),s=se("0"),i=se(!1),r=se(!0),c=se(!1),m=se(0);const y=["Main","Second","Third","Settings","Fifth"];function u(){O(i)?o():f()}function o(){D(s,"0"),D(i,!1),D(r,!0)}function f(){D(s,"250px"),D(i,!0),D(r,!1)}function I(){y[O(m)]==="Settings"&&D(c,!0),o()}var p=ba(),l=ye(p);let _;var b=N(l);b.__click=u;var k=j(b,2);ga(k,{get disabled(){return O(r)},onpressed:I,get items(){return y},wrap:!1,get selectedIndex(){return O(m)},set selectedIndex(P){D(m,P,!0)}}),M(l);var v=j(l,2);let C;var x=N(v);Oe(x,{onpressed:()=>(u(),!0),input_mapping:{name:"Side Nav",gamepad:-1,gamepad_buttons:[9],keyboard_keys:["q"]},children:(P,oe)=>{de();var V=Ee("Side Menu");G(P,V)},$$slots:{default:!0}});var d=j(x,3);ta(d,{});var g=j(d,2);aa(g,{});var A=j(g,2);$e(A,{style:"background-color: rgb(6, 23, 28);",size:120,get disabled(){return O(i)},get position(){return O(a)},set position(P){D(a,P,!0)}});var Y=j(A),X=j(Y,2),R=j(X,3),L=N(R);$e(L,{color:"rgb(236, 97, 159)",get disabled(){return O(i)},input_mapping:{name:"second Virtual Joystick",gamepad:-1,axes_x:2,axes_y:3,key_x_pos:"l",key_x_neg:"j",key_y_pos:"k",key_y_neg:"i",deadzoneX:.05,deadzoneY:.05,invert_x:!1,invert_y:!1},get position(){return O(n)},set position(P){D(n,P,!0)}});var F=j(L,2),q=N(F),U=j(q,2);M(F),M(R);var K=j(R,5);Oe(K,{style:"background-color: rgb(29, 58, 143); color: white;",get disabled(){return O(i)},input_mapping:{name:"blue button",gamepad:-1,gamepad_buttons:[1],keyboard_keys:["r"]},children:(P,oe)=>{de();var V=Ee('PRESS CIRCLE OR "R"!');G(P,V)},$$slots:{default:!0}});var T=j(K,2);Oe(T,{style:"background-color: rgb(247, 167, 018);",get disabled(){return O(i)},input_mapping:{name:"orange button",gamepad:-1,gamepad_buttons:[3],keyboard_keys:["x"]},children:(P,oe)=>{de();var V=Ee('PRESS TRIANGLE OR "X"!');G(P,V)},$$slots:{default:!0}});var ie=j(T,7);ie.__click=[ya];var ne=j(ie,2);let re;var E=N(ne),S=N(E);Oe(S,{input_mapping:{name:"cancel settings",gamepad:-1,gamepad_buttons:[1],keyboard_keys:["Escape","q"]},onpressed:()=>(D(c,!1),!0),children:(P,oe)=>{de();var V=Ee("cancel");G(P,V)},$$slots:{default:!0}});var B=j(S,4);ea(B,{}),M(E),M(ne),M(v),pe((P,oe,V)=>{_=ee(l,"",_,P),C=ee(v,"",C,oe),ue(Y,` x: ${O(a)[0]??""}`),ue(X,` y: ${O(a)[1]??""} `),ue(q,`x: ${O(n)[0]??""}`),ue(U,` y: ${O(n)[1]??""}`),re=ee(ne,"",re,V)},[()=>({width:O(s)}),()=>({"margin-left":O(s),"min-width":"500px"}),()=>({display:O(c)?"block":"none"})]),G(t,p),ae()}Te(["click"]);export{Ea as component};
