import"../chunks/Bzak7iHL.js";import{a6 as et,al as ft,aB as tt,Z as Ce,a8 as G,T as _t,_ as vt,b as E,e as pt,an as gt,ao as yt,ap as Ke,Y as Te,$ as me,U as bt,a0 as mt,a7 as Ye,as as ht,aC as Ie,aD as Me,aq as ge,aE as Ve,ax as kt,aF as ze,a4 as at,Q as xt,at as nt,au as At,aG as Et,aH as Pe,N as Ot,aI as rt,aJ as jt,W as wt,aK as It,a3 as Mt,aL as St,k as Nt,aM as Ct,aN as Tt,aO as Pt,aP as Ft,u as st,aw as it,aQ as Lt,i as L,h as Q,A as ae,B as ee,H as O,f as ye,a as U,E as ne,F as S,G as I,C as ve,aR as oe,aS as Fe,aT as je,c as Rt,s as ot,aU as Bt,ay as re,aA as xe}from"../chunks/C9brnziC.js";import{a as Dt,l as dt,s as de,o as Se,e as be,d as Ne}from"../chunks/zsmM9AtP.js";import{i as ut}from"../chunks/de6wT86b.js";import{p as k}from"../chunks/_rOX-0GO.js";function he(t,e){return e}function Ht(t,e,a){for(var n=t.items,i=[],o=e.length,s=0;s<o;s++)It(e[s].e,i,!0);var l=o>0&&i.length===0&&a!==null;if(l){var m=a.parentNode;Mt(m),m.append(a),n.clear(),$(t,e[0].prev,e[o-1].next)}St(i,()=>{for(var y=0;y<o;y++){var d=e[y];l||(n.delete(d.k),$(t,d.prev,d.next)),rt(d.e,!l)}})}function ke(t,e,a,n,i,o=null){var s=t,l={flags:e,items:new Map,first:null},m=(e&tt)!==0;if(m){var y=t;s=G?Ce(_t(y)):y.appendChild(et())}G&&vt();var d=null,r=!1,c=new Map,w=pt(()=>{var b=a();return xt(b)?b:b==null?[]:at(b)}),g,f;function _(){Yt(f,g,l,c,s,i,e,n,a),o!==null&&(g.length===0?d?nt(d):d=Ye(()=>o(s)):d!==null&&At(d,()=>{d=null}))}ft(()=>{f??(f=Nt),g=E(w);var b=g.length;if(r&&b===0)return;r=b===0;let h=!1;if(G){var v=gt(s)===yt;v!==(b===0)&&(s=Ke(),Ce(s),Te(!1),h=!0)}if(G){for(var T=null,x,u=0;u<b;u++){if(me.nodeType===bt&&me.data===mt){s=me,h=!0,Te(!1);break}var p=g[u],M=n(p,u);x=Ge(me,l,T,null,p,M,u,i,e,a),l.items.set(M,x),T=x}b>0&&Ce(Ke())}if(G)b===0&&o&&(d=Ye(()=>o(s)));else if(ht()){var H=new Set,Y=ge;for(u=0;u<b;u+=1){p=g[u],M=n(p,u);var N=l.items.get(M)??c.get(M);N?(e&(Ie|Me))!==0&&lt(N,p,u,e):(x=Ge(null,l,null,null,p,M,u,i,e,a,!0),c.set(M,x)),H.add(M)}for(const[F,z]of l.items)H.has(F)||Y.skipped_effects.add(z.e);Y.add_callback(_)}else _();h&&Te(!0),E(w)}),G&&(s=me)}function Yt(t,e,a,n,i,o,s,l,m){var A,C,B,V;var y=(s&jt)!==0,d=(s&(Ie|Me))!==0,r=e.length,c=a.items,w=a.first,g=w,f,_=null,b,h=[],v=[],T,x,u,p;if(y)for(p=0;p<r;p+=1)T=e[p],x=l(T,p),u=c.get(x),u!==void 0&&((A=u.a)==null||A.measure(),(b??(b=new Set)).add(u));for(p=0;p<r;p+=1){if(T=e[p],x=l(T,p),u=c.get(x),u===void 0){var M=n.get(x);if(M!==void 0){n.delete(x),c.set(x,M);var H=_?_.next:g;$(a,_,M),$(a,M,H),Le(M,H,i),_=M}else{var Y=g?g.e.nodes_start:i;_=Ge(Y,a,_,_===null?a.first:_.next,T,x,p,o,s,m)}c.set(x,_),h=[],v=[],g=_.next;continue}if(d&&lt(u,T,p,s),(u.e.f&Pe)!==0&&(nt(u.e),y&&((C=u.a)==null||C.unfix(),(b??(b=new Set)).delete(u))),u!==g){if(f!==void 0&&f.has(u)){if(h.length<v.length){var N=v[0],F;_=N.prev;var z=h[0],q=h[h.length-1];for(F=0;F<h.length;F+=1)Le(h[F],N,i);for(F=0;F<v.length;F+=1)f.delete(v[F]);$(a,z.prev,q.next),$(a,_,z),$(a,q,N),g=N,_=q,p-=1,h=[],v=[]}else f.delete(u),Le(u,g,i),$(a,u.prev,u.next),$(a,u,_===null?a.first:_.next),$(a,_,u),_=u;continue}for(h=[],v=[];g!==null&&g.k!==x;)(g.e.f&Pe)===0&&(f??(f=new Set)).add(g),v.push(g),g=g.next;if(g===null)continue;u=g}h.push(u),_=u,g=u.next}if(g!==null||f!==void 0){for(var X=f===void 0?[]:at(f);g!==null;)(g.e.f&Pe)===0&&X.push(g),g=g.next;var K=X.length;if(K>0){var P=(s&tt)!==0&&r===0?i:null;if(y){for(p=0;p<K;p+=1)(B=X[p].a)==null||B.measure();for(p=0;p<K;p+=1)(V=X[p].a)==null||V.fix()}Ht(a,X,P)}}y&&Ot(()=>{var pe;if(b!==void 0)for(u of b)(pe=u.a)==null||pe.apply()}),t.first=a.first&&a.first.e,t.last=_&&_.e;for(var se of n.values())rt(se.e);n.clear()}function lt(t,e,a,n){(n&Ie)!==0&&Ve(t.v,e),(n&Me)!==0?Ve(t.i,a):t.i=a}function Ge(t,e,a,n,i,o,s,l,m,y,d){var r=(m&Ie)!==0,c=(m&Et)===0,w=r?c?kt(i,!1,!1):ze(i):i,g=(m&Me)===0?s:ze(s),f={i:g,v:w,k:o,a:null,e:null,prev:a,next:n};try{if(t===null){var _=document.createDocumentFragment();_.append(t=et())}return f.e=Ye(()=>l(t,w,g,y),G),f.e.prev=a&&a.e,f.e.next=n&&n.e,a===null?d||(e.first=f):(a.next=f,a.e.next=f.e),n!==null&&(n.prev=f,n.e.prev=f.e),f}finally{}}function Le(t,e,a){for(var n=t.next?t.next.e.nodes_start:a,i=e?e.e.nodes_start:a,o=t.e.nodes_start;o!==null&&o!==n;){var s=wt(o);i.before(o),o=s}}function $(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function ct(t){var e,a,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(a=ct(t[e]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a);return n}function zt(){for(var t,e,a=0,n="",i=arguments.length;a<i;a++)(t=arguments[a])&&(e=ct(t))&&(n&&(n+=" "),n+=e);return n}function We(t){return typeof t=="object"?zt(t):t??""}function Gt(t,e,a){var n=t==null?"":""+t;return n===""?null:n}function Je(t,e=!1){var a=e?" !important;":";",n="";for(var i in t){var o=t[i];o!=null&&o!==""&&(n+=" "+i+": "+o+a)}return n}function Re(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ut(t,e){if(e){var a="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,l=!1,m=[];n&&m.push(...Object.keys(n).map(Re)),i&&m.push(...Object.keys(i).map(Re));var y=0,d=-1;const f=t.length;for(var r=0;r<f;r++){var c=t[r];if(l?c==="/"&&t[r-1]==="*"&&(l=!1):o?o===c&&(o=!1):c==="/"&&t[r+1]==="*"?l=!0:c==='"'||c==="'"?o=c:c==="("?s++:c===")"&&s--,!l&&o===!1&&s===0){if(c===":"&&d===-1)d=r;else if(c===";"||r===f-1){if(d!==-1){var w=Re(t.substring(y,d).trim());if(!m.includes(w)){c!==";"&&r++;var g=t.substring(y,r).trim();a+=" "+g+";"}}y=r+1,d=-1}}}}return n&&(a+=Je(n)),i&&(a+=Je(i,!0)),a=a.trim(),a===""?null:a}return t==null?null:String(t)}function Ue(t,e,a,n,i,o){var s=t.__className;if(G||s!==a||s===void 0){var l=Gt(a);(!G||l!==t.getAttribute("class"))&&(l==null?t.removeAttribute("class"):t.className=l),t.__className=a}return o}function Be(t,e={},a,n){for(var i in a){var o=a[i];e[i]!==o&&(a[i]==null?t.style.removeProperty(i):t.style.setProperty(i,o,n))}}function te(t,e,a,n){var i=t.__style;if(G||i!==e){var o=Ut(e,n);(!G||o!==t.getAttribute("style"))&&(o==null?t.removeAttribute("style"):t.style.cssText=o),t.__style=e}else n&&(Array.isArray(n)?(Be(t,a==null?void 0:a[0],n[0]),Be(t,a==null?void 0:a[1],n[1],"important")):Be(t,a,n));return n}const Xt=Symbol("is custom element"),qt=Symbol("is html");function J(t){if(G){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var n=t.value;Qe(t,"value",null),t.value=n}if(t.hasAttribute("checked")){var i=t.checked;Qe(t,"checked",null),t.checked=i}}};t.__on_r=a,Ct(a),Dt()}}function Qe(t,e,a,n){var i=Kt(t);G&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=a)&&(e==="loading"&&(t[Tt]=a),t.removeAttribute(e))}function Kt(t){return t.__attributes??(t.__attributes={[Xt]:t.nodeName.includes("-"),[qt]:t.namespaceURI===Pt})}function Z(t,e,a=e){var n=Ft(),i=new WeakSet;dt(t,"input",o=>{var s=o?t.defaultValue:t.value;if(s=De(t)?He(s):s,a(s),ge!==null&&i.add(ge),n&&s!==(s=e())){var l=t.selectionStart,m=t.selectionEnd;t.value=s??"",m!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(m,t.value.length))}}),(G&&t.defaultValue!==t.value||st(e)==null&&t.value)&&(a(De(t)?He(t.value):t.value),ge!==null&&i.add(ge)),it(()=>{var o=e();if(t===document.activeElement){var s=Lt??ge;if(i.has(s))return}De(t)&&o===He(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Ze(t,e,a=e){dt(t,"change",n=>{var i=n?t.defaultChecked:t.checked;a(i)}),(G&&t.defaultChecked!==t.checked||st(e)==null)&&a(t.checked),it(()=>{var n=e();t.checked=!!n})}function De(t){var e=t.type;return e==="number"||e==="range"}function He(t){return t===""?null:+t}function Vt(t){var e=ze(0);return function(){return arguments.length===1?(L(e,E(e)+1),arguments[0]):(E(e),t())}}const D=Q({buttons:[],joysticks:[],lists:[]});var j=Vt(()=>D),Wt=ee('<tr><td> </td><td><input type="number" class="svelte-njcpkv"/></td><td><input type="number" class="svelte-njcpkv"/></td><td><input type="number" class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input type="checkbox" class="svelte-njcpkv"/></td><td><input type="checkbox" class="svelte-njcpkv"/></td></tr>'),Jt=ee('<input type="number" class="svelte-njcpkv"/><br/>',1),Qt=ee('<input type="text" class="svelte-njcpkv"/><br/>',1),Zt=ee('<tr><td> </td><td><input type="number" class="svelte-njcpkv"/></td><td></td><td><button>+</button></td><td></td><td><button>+</button></td></tr>'),$t=ee("<h2>Configuration</h2> Key Mapping joystick inputs (gamepad -1=all, -2&lt;=disabled) <br/> <table><tbody><tr><td>Name</td><td>Gamepad</td><td>Pad X</td><td>Pad Y</td><td>Key X Pos</td><td>Key X Neg</td><td>Key Y Pos</td><td>Key Y Neg</td><td>Invert X</td><td>Invert Y</td></tr><!></tbody></table> <br/> Buttons:<br/> <table><tbody><tr><td>name</td><td>gamepad</td><td>Pad button</td><td></td><td>key</td><td></td></tr><!></tbody></table>",1);function ea(t,e){ae(e,!1),ut();var a=$t(),n=O(ye(a),4),i=S(n),o=O(S(i));ke(o,1,()=>j().joysticks,he,(y,d,r)=>{var c=Wt(),w=S(c),g=S(w,!0);I(w);var f=O(w),_=S(f);J(_),I(f);var b=O(f),h=S(b);J(h),I(b);var v=O(b),T=S(v);J(T),I(v);var x=O(v),u=S(x);J(u),I(x);var p=O(x),M=S(p);J(M),I(p);var H=O(p),Y=S(H);J(Y),I(H);var N=O(H),F=S(N);J(F),I(N);var z=O(N),q=S(z);J(q),I(z);var X=O(z),K=S(X);J(K),I(X),I(c),ve(()=>de(g,E(d).name)),Z(_,()=>j().joysticks[r].gamepad,P=>j(j().joysticks[r].gamepad=P)),Z(h,()=>j().joysticks[r].axes_x,P=>j(j().joysticks[r].axes_x=P)),Z(T,()=>j().joysticks[r].axes_y,P=>j(j().joysticks[r].axes_y=P)),Z(u,()=>j().joysticks[r].key_x_pos,P=>j(j().joysticks[r].key_x_pos=P)),Z(M,()=>j().joysticks[r].key_x_neg,P=>j(j().joysticks[r].key_x_neg=P)),Z(Y,()=>j().joysticks[r].key_y_pos,P=>j(j().joysticks[r].key_y_pos=P)),Z(F,()=>j().joysticks[r].key_y_neg,P=>j(j().joysticks[r].key_y_neg=P)),Ze(q,()=>j().joysticks[r].invert_x,P=>j(j().joysticks[r].invert_x=P)),Ze(K,()=>j().joysticks[r].invert_y,P=>j(j().joysticks[r].invert_y=P)),U(y,c)}),I(i),I(n);var s=O(n,6),l=S(s),m=O(S(l));ke(m,1,()=>j().buttons,he,(y,d,r)=>{var c=Zt(),w=S(c),g=S(w,!0);I(w);var f=O(w),_=S(f);J(_),I(f);var b=O(f);ke(b,5,()=>E(d).gamepad_buttons,he,(v,T,x)=>{var u=Jt(),p=ye(u);J(p),oe(),Z(p,()=>E(d).gamepad_buttons[x],M=>(E(d).gamepad_buttons[x]=M,Fe(()=>j()))),U(v,u)}),I(b);var h=O(b,2);ke(h,5,()=>E(d).keyboard_keys,he,(v,T,x)=>{var u=Qt(),p=ye(u);J(p),oe(),Z(p,()=>E(d).keyboard_keys[x],M=>(E(d).keyboard_keys[x]=M,Fe(()=>j()))),U(v,u)}),I(h),oe(),I(c),ve(()=>de(g,E(d).name)),Z(_,()=>E(d).gamepad,v=>(E(d).gamepad=v,Fe(()=>j()))),U(y,c)}),I(l),I(s),U(t,a),ne()}const ue=Q([]),Ee=Q([]),Oe=Q([]),le=Q([]);function ta(t,e){ae(e,!0);let a=k(e,"updateUsingAnimationFrame",3,!1),n=k(e,"updateUsingInterval",3,!0),i=k(e,"timeout",3,1e3/25),o={},s;function l(d){s=d.target.navigator}function m(){if(s){for(let d of s.getGamepads())if(d){for(let r=0;r<d.buttons.length;r++){if(d.buttons[r].pressed&&(Ee.forEach(c=>c(d,r)),!o[r])){o[r]=!0;for(let c of ue)if(c(d,r)===!0)break}o[r]&&!d.buttons[r].pressed&&(o[r]=!1,Oe.forEach(c=>c(d,r)))}le.forEach(r=>r(d))}}}function y(){m(),requestAnimationFrame(y)}return Se(()=>{a()?y():n()&&setInterval(m,i())}),be("gamepadconnected",je,l),ne({updateGamepadValues:m})}const ce=Q([]),fe=Q([]),_e=Q([]);function aa(t,e){ae(e,!1);let a={},n=s=>{for(let l of ce)if(l(s)===!0)break},i=s=>{a[s.key]||n(s),a[s.key]=!0,fe.forEach(l=>{l(s)})},o=s=>{delete a[s.key],_e.forEach(l=>{l(s)})};ut(),be("keydown",je,i),be("keyup",je,o),ne()}const na=(t,e)=>Math.sqrt(t**2+e**2),ra=(t,e)=>Math.atan2(e,t),sa=(t,e)=>[t*Math.cos(e),t*Math.sin(e)],ia=(t,e)=>Math.min(Math.max(-e,t),e);function we(t,e){return t.gamepad===-1||t.gamepad===e.index}function oa(t,e){ae(e,!0);let a=k(e,"disabled",3,!1),n=k(e,"onpressed",3,void 0),i=k(e,"onhold",3,void 0),o=k(e,"onrelease",3,void 0),s=k(e,"pressed",15,!1),l=k(e,"input_mapping",19,()=>({name:"",gamepad:-1,gamepad_buttons:[0],keyboard_keys:["e"," "]}));const m=()=>{a()||(s(!0),n()&&n()())},y=()=>{!a()&&i()&&i()()},d=()=>{s(!1),o()&&o()()};Se(()=>{D.buttons.push(l());const w=D.buttons[D.buttons.length-1];function g(u){return w.keyboard_keys.indexOf(u.key)>-1}function f(u,p){return we(w,u)?w.gamepad_buttons.indexOf(p)>-1:!1}const _=u=>{g(u)&&m()},b=u=>{g(u)&&d()},h=u=>{g(u)&&y()},v=(u,p)=>{f(u,p)&&m()},T=(u,p)=>{f(u,p)&&d()},x=(u,p)=>{f(u,p)&&y()};return ce.push(_),_e.push(b),fe.push(h),ue.push(v),Oe.push(T),Ee.push(x),()=>{ce.splice(ce.indexOf(_),1),_e.splice(_e.indexOf(b),1),fe.splice(fe.indexOf(h),1),ue.splice(ue.indexOf(v),1),Oe.splice(Oe.indexOf(T),1),Ee.splice(Ee.indexOf(x),1),D.buttons.splice(D.buttons.indexOf(w),1)}});var r=Rt(),c=ye(r);ot(c,()=>e.children??Bt),U(t,r),ne()}const da=(t,e,a,n)=>{e()||(a(!0),n()&&n()())},ua=(t,e,a)=>{e(!1),a()&&a()()};var la=ee("<button><!></button>");function Ae(t,e){ae(e,!0);let a=k(e,"disabled",3,!1),n=k(e,"onpressed",3,void 0),i=k(e,"onhold",3,void 0),o=k(e,"onrelease",3,void 0),s=k(e,"pressed",7,!1),l=k(e,"style",3,""),m=k(e,"cssclass",3,"vbutton"),y=k(e,"input_mapping",19,()=>({name:"",gamepad:-1,gamepad_buttons:[0],keyboard_keys:["e"," "]}));oa(t,{get disabled(){return a()},get onpressed(){return n()},get onhold(){return i()},get onrelease(){return o()},get input_mapping(){return y()},get pressed(){return s()},set pressed(d){s(d)},children:(d,r)=>{var c=la();c.__pointerdown=[da,a,s,n],c.__pointerup=[ua,s,o];var w=S(c);ot(w,()=>e.children),I(c),ve(()=>{te(c,l()),Ue(c,1,(!a()&&s()?"button_clicked ":"")+m())}),U(d,c)},$$slots:{default:!0}}),ne()}Ne(["pointerdown","pointerup"]);var ca=()=>{},fa=ee('<div id="joystick_area" class="svelte-7naxxk"><div class="joystick_container svelte-7naxxk"><div class="joystick_back svelte-7naxxk"></div> <div class="joystick_front svelte-7naxxk"></div></div></div>');function $e(t,e){ae(e,!0);let a=k(e,"disabled",3,!1),n=k(e,"size",3,100),i=k(e,"backgroundWidth",3,200),o=k(e,"backgroundHeight",3,200),s=k(e,"color",3,"rgb(106, 191, 163)"),l=k(e,"defaultOpacity",3,.5),m=k(e,"activeOpacity",3,.8),y=k(e,"border",3,1),d=k(e,"borderColor",3,"black"),r=k(e,"position",31,()=>Q([0,0])),c=k(e,"style",3,"background-color: rgb(215, 219, 221);"),w=k(e,"input_mapping",19,()=>({name:"Virtual Joystick",gamepad:-1,axes_x:0,axes_y:1,key_x_pos:"d",key_x_neg:"a",key_y_pos:"s",key_y_neg:"w",deadzoneX:.05,deadzoneY:.05,invert_x:!1,invert_y:!1}));function g(A){r(A)}const f=n()/2;let _=!1,b=!0,h=re(Q(l()));D.joysticks.push(w());const v=D.joysticks[D.joysticks.length-1];function T(A){if(a()||!v.gamepad||!_||!A.target)return;b=!1;const C=A.target.getBoundingClientRect(),B=A.x-C.x,V=A.y-C.y;x(B,V)}function x(A,C){let B=A-i()/2,V=C-o()/2;const pe=na(B,V),R=ra(B,V);let ie=ia(pe,f),W=sa(ie,R),Xe=W[0]/f,qe=W[1]/f;if(Math.abs(Xe)<v.deadzoneX&&Math.abs(qe)<v.deadzoneY){r([0,0]),L(h,l());return}L(h,m()),r([Xe,qe])}function u(){_=!1,L(h,l()),r([0,0])}const p=A=>{if(a())return;let C=!1;v.key_x_pos==A.key?(r(r()[0]=1,!0),C=!0):v.key_x_neg==A.key&&(r(r()[0]=-1,!0),C=!0),v.key_y_pos==A.key?(r(r()[1]=1,!0),C=!0):v.key_y_neg==A.key&&(r(r()[1]=-1,!0),C=!0),C&&(b=!1,L(h,m()),r(r()))},M=A=>{let C=!1;(v.key_x_pos==A.key||v.key_x_neg==A.key)&&(r(r()[0]=0,!0),C=!0),(v.key_y_pos==A.key||v.key_y_neg==A.key)&&(r(r()[1]=0,!0),C=!0),C&&(b=!0,L(h,l()),r(r()))},H=A=>{if(a()||!b||!we(v,A))return;let C=A.axes[v.axes_x],B=A.axes[v.axes_y];if(v.invert_x&&(C=-C),v.invert_y&&(B=-B),Math.abs(C)<v.deadzoneX&&Math.abs(B)<v.deadzoneY){L(h,l()),r([0,0]);return}L(h,m()),r([C,B])};Se(()=>(fe.push(p),_e.push(M),le.push(H),()=>{fe.splice(fe.indexOf(p),1),_e.splice(_e.indexOf(M),1),le.splice(le.indexOf(H),1),D.joysticks.splice(D.joysticks.indexOf(v),1)}));const Y=()=>{a()||(b=!0)};var N=fa();be("pointerup",je,u);let F;N.__pointerdown=A=>{a()||(A.stopImmediatePropagation(),_=!0,T(A))},N.__pointerup=Y,N.__pointermove=T,N.__touchstart=[ca],N.__touchend=Y,N.__pointerout=Y;var z=S(N);let q;var X=S(z);let K;var P=O(X,2);let se;return I(z),I(N),ve((A,C,B,V)=>{F=te(N,c(),F,A),q=te(z,"",q,C),K=te(X,"",K,B),se=te(P,"",se,V)},[()=>({width:i()+"px",height:o()+"px"}),()=>({left:(i()-n())/2+"px",top:(o()-n())/2+"px"}),()=>({width:n()+"px",height:n()+"px",background:s(),opacity:E(h),border:y()>0?y()+"px solid "+d():0}),()=>({left:r()[0]*f+"px",top:r()[1]*f+"px","margin-top":f/2+"px","margin-left":f/2+"px",transition:"none",width:f+"px",height:f+"px",background:s(),opacity:E(h),border:y()>0?y()+"px solid "+d():0})]),be("pointerleave",N,Y),U(t,N),ne({update:g})}Ne(["pointerdown","pointerup","pointermove","touchstart","touchend","pointerout"]);function _a(t,e){ae(e,!0);let a=k(e,"disabled",3,!1),n=k(e,"input_mapping",19,()=>({name:"List",gamepad:-1,gamepad_axes:[1],gamepad_axes_sens:.05,gamepad_buttons:[0],gamepad_prev_buttons:[12],gamepad_next_buttons:[13],keyboard_prev_keys:["ArrowUp","w"],keyboard_next_keys:["ArrowDown","s"],keyboard_keys:["e"]}));D.lists.push(n());const i=D.lists[D.lists.length-1];let o=-1;Se(()=>{const s=y=>{if(!a()){if(n().keyboard_keys.indexOf(y.key)>-1){e.onpressed&&e.onpressed();return}if(n().keyboard_next_keys.indexOf(y.key)>-1){e.changeFocus(1);return}n().keyboard_prev_keys.indexOf(y.key)>-1&&e.changeFocus(-1)}},l=(y,d)=>{if(!(a()||!we(i,y))){if(n().gamepad_buttons.indexOf(d)>-1){e.onpressed&&e.onpressed();return}if(n().gamepad_next_buttons.indexOf(d)>-1){e.changeFocus(1);return}if(n().gamepad_prev_buttons.indexOf(d)>-1){e.changeFocus(-1);return}}},m=y=>{if(!(a()||!we(i,y)))for(const d of n().gamepad_axes){const r=y.axes[d];let c=n().gamepad_axes_sens;if(r<-c&&o!=d){e.changeFocus(-1),o=d;continue}if(r>c&&o!=d){e.changeFocus(1),o=d;continue}r<c&&r>-c&&(o=-1)}};return ce.push(s),ue.push(l),le.push(m),()=>{ce.splice(ce.indexOf(s),1),ue.splice(ue.indexOf(l),1),le.splice(le.indexOf(m),1),D.lists.splice(D.lists.indexOf(i),1)}}),ne()}var va=ee("<li> </li>"),pa=ee("<!> <ul></ul>",1);function ga(t,e){ae(e,!0);let a=k(e,"disabled",3,!1),n=k(e,"wrap",3,!0),i=k(e,"style",3,""),o=k(e,"cssclass",3,"vlist"),s=k(e,"selectedIndex",15,0),l=k(e,"focussed",15,0),m=k(e,"input_mapping",19,()=>({name:"List",gamepad:-1,gamepad_axes:[1],gamepad_axes_sens:.05,gamepad_buttons:[0],gamepad_prev_buttons:[12],gamepad_next_buttons:[13],keyboard_prev_keys:["ArrowUp","w"],keyboard_next_keys:["ArrowDown","s"],keyboard_keys:["e"]}));function y(_){let b="";return s()===_&&(b+="selected "),l()===_&&(b+="focussed "),b}function d(_){_>=e.items.length&&(_=n()?0:e.items.length-1),_<0&&(_=n()?e.items.length-1:0),l(_)}function r(_){d(l()+_)}function c(){s(l()),e.onpressed&&e.onpressed()}var w=pa(),g=ye(w);_a(g,{changeFocus:r,onpressed:c,get disabled(){return a()},get input_mapping(){return m()}});var f=O(g,2);ke(f,21,()=>e.items,he,(_,b,h)=>{var v=va();v.__pointerdown=()=>{a()||(s(h),c())};var T=S(v,!0);I(v),ve(x=>{Ue(v,1,x),de(T,E(b))},[()=>We(y(h))]),be("pointerenter",v,()=>{a()||l(h)}),U(_,v)}),I(f),ve(()=>{te(f,i()),Ue(f,1,We(o()))}),U(t,w),ne()}Ne(["pointerdown"]);function ya(){document.getElementById("main").requestFullscreen()}var ba=ee('<div id="sidenav" class="sidenav"><button class="closebtn">&times;</button> <!></div> <main><!><br/> <!> <!> <!> <br/> <br/> <div style="position: absolute; top: 30px; right: 30px;"><!> <div style="max-width: 200px;"> <br/> </div></div> <br/><br/> <!> <!> <br/><br/> <hr/> <button>Fullscreen</button> <div id="nav_modal" class="modal"><div class="modal-content"><!> <br/> <!></div></div></main>',1);function Ea(t,e){ae(e,!0);let a=re(Q([0,0])),n=re(Q([0,0])),i=re("0"),o=re(!1),s=re(!0),l=re(!1),m=re(0);const y=["Main","Second","Third","Settings","Fifth"];function d(){E(o)?r():c()}function r(){L(i,"0"),L(o,!1),L(s,!0)}function c(){L(i,"250px"),L(o,!0),L(s,!1)}function w(){y[E(m)]==="Settings"&&L(l,!0),r()}var g=ba(),f=ye(g);let _;var b=S(f);b.__click=d;var h=O(b,2);ga(h,{get disabled(){return E(s)},onpressed:w,get items(){return y},wrap:!1,get selectedIndex(){return E(m)},set selectedIndex(R){L(m,R,!0)}}),I(f);var v=O(f,2);let T;var x=S(v);Ae(x,{onpressed:()=>(d(),!0),input_mapping:{name:"Side Nav",gamepad:-1,gamepad_buttons:[9],keyboard_keys:["q"]},children:(R,ie)=>{oe();var W=xe("Side Menu");U(R,W)},$$slots:{default:!0}});var u=O(x,3);ta(u,{});var p=O(u,2);aa(p,{});var M=O(p,2);$e(M,{style:"background-color: rgb(6, 23, 28);",size:120,get disabled(){return E(o)},get position(){return E(a)},set position(R){L(a,R,!0)}});var H=O(M),Y=O(H,2),N=O(Y,3),F=S(N);$e(F,{color:"rgb(236, 97, 159)",get disabled(){return E(o)},input_mapping:{name:"second Virtual Joystick",gamepad:-1,axes_x:2,axes_y:3,key_x_pos:"l",key_x_neg:"j",key_y_pos:"k",key_y_neg:"i",deadzoneX:.05,deadzoneY:.05,invert_x:!1,invert_y:!1},get position(){return E(n)},set position(R){L(n,R,!0)}});var z=O(F,2),q=S(z),X=O(q,2);I(z),I(N);var K=O(N,5);Ae(K,{style:"background-color: rgb(29, 58, 143); color: white;",get disabled(){return E(o)},input_mapping:{name:"blue button",gamepad:-1,gamepad_buttons:[1],keyboard_keys:["r"]},children:(R,ie)=>{oe();var W=xe('PRESS CIRCLE OR "R"!');U(R,W)},$$slots:{default:!0}});var P=O(K,2);Ae(P,{style:"background-color: rgb(247, 167, 018);",get disabled(){return E(o)},input_mapping:{name:"orange button",gamepad:-1,gamepad_buttons:[3],keyboard_keys:["x"]},children:(R,ie)=>{oe();var W=xe('PRESS TRIANGLE OR "X"!');U(R,W)},$$slots:{default:!0}});var se=O(P,7);se.__click=[ya];var A=O(se,2);let C;var B=S(A),V=S(B);Ae(V,{input_mapping:{name:"cancel settings",gamepad:-1,gamepad_buttons:[1],keyboard_keys:["Escape","q"]},onpressed:()=>(L(l,!1),!0),children:(R,ie)=>{oe();var W=xe("cancel");U(R,W)},$$slots:{default:!0}});var pe=O(V,4);ea(pe,{}),I(B),I(A),I(v),ve((R,ie,W)=>{_=te(f,"",_,R),T=te(v,"",T,ie),de(H,` x: ${E(a)[0]??""}`),de(Y,` y: ${E(a)[1]??""} `),de(q,`x: ${E(n)[0]??""}`),de(X,` y: ${E(n)[1]??""}`),C=te(A,"",C,W)},[()=>({width:E(i)}),()=>({"margin-left":E(i),"min-width":"500px"}),()=>({display:E(l)?"block":"none"})]),U(t,g),ne()}Ne(["click"]);export{Ea as component};
