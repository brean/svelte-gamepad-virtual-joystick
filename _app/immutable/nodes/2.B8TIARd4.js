import"../chunks/Bzak7iHL.js";import{a6 as nt,al as _t,aB as at,Z as Le,a8 as q,T as pt,_ as gt,b as M,e as ht,an as yt,ao as mt,ap as We,Y as Re,$ as be,U as bt,a0 as kt,a7 as qe,as as xt,aC as Ne,aD as Ce,aq as ye,aE as Je,ax as At,aF as Xe,a4 as rt,Q as wt,at as st,au as Et,aG as Ot,aH as Fe,N as jt,aI as it,aJ as St,W as Mt,aK as It,a3 as Nt,aL as Ct,k as Tt,aM as Pt,aN as Lt,aO as Rt,aP as Ft,aQ as Bt,aR as zt,u as ot,aw as ut,aS as Dt,i as U,h as J,A as $,B as ee,H as A,f as ce,a as D,E as te,F as N,G as S,C as ie,aT as de,aU as Be,aV as Se,c as Ht,s as lt,aW as Yt,ay as le,az as Gt,aA as we}from"../chunks/8XnfaBy2.js";import{a as Ut,l as dt,s as fe,o as Ae,e as me,d as Te}from"../chunks/UH2qjFqX.js";import{i as ft}from"../chunks/DreEicKD.js";import{p as y}from"../chunks/JvLisGqb.js";function ke(t,e){return e}function qt(t,e,n){for(var a=t.items,r=[],s=e.length,i=0;i<s;i++)It(e[i].e,r,!0);var d=s>0&&r.length===0&&n!==null;if(d){var m=n.parentNode;Nt(m),m.append(n),a.clear(),ae(t,e[0].prev,e[s-1].next)}Ct(r,()=>{for(var v=0;v<s;v++){var u=e[v];d||(a.delete(u.k),ae(t,u.prev,u.next)),it(u.e,!d)}})}function xe(t,e,n,a,r,s=null){var i=t,d={flags:e,items:new Map,first:null},m=(e&at)!==0;if(m){var v=t;i=q?Le(pt(v)):v.appendChild(nt())}q&&gt();var u=null,o=!1,_=new Map,j=ht(()=>{var b=n();return wt(b)?b:b==null?[]:rt(b)}),f,c;function p(){Xt(c,f,d,_,i,r,e,a,n),s!==null&&(f.length===0?u?st(u):u=qe(()=>s(i)):u!==null&&Et(u,()=>{u=null}))}_t(()=>{c??(c=Tt),f=M(j);var b=f.length;if(o&&b===0)return;o=b===0;let k=!1;if(q){var g=yt(i)===mt;g!==(b===0)&&(i=We(),Le(i),Re(!1),k=!0)}if(q){for(var C=null,w,l=0;l<b;l++){if(be.nodeType===bt&&be.data===kt){i=be,k=!0,Re(!1);break}var h=f[l],E=a(h,l);w=Ke(be,d,C,null,h,E,l,r,e,n),d.items.set(E,w),C=w}b>0&&Le(We())}if(q)b===0&&s&&(u=qe(()=>s(i)));else if(xt()){var H=new Set,X=ye;for(l=0;l<b;l+=1){h=f[l],E=a(h,l);var z=d.items.get(E)??_.get(E);z?(e&(Ne|Ce))!==0&&ct(z,h,l,e):(w=Ke(null,d,null,null,h,E,l,r,e,n,!0),_.set(E,w)),H.add(E)}for(const[L,P]of d.items)H.has(L)||X.skipped_effects.add(P.e);X.add_callback(p)}else p();k&&Re(!0),M(j)}),q&&(i=be)}function Xt(t,e,n,a,r,s,i,d,m){var ue,se,x,I;var v=(i&St)!==0,u=(i&(Ne|Ce))!==0,o=e.length,_=n.items,j=n.first,f=j,c,p=null,b,k=[],g=[],C,w,l,h;if(v)for(h=0;h<o;h+=1)C=e[h],w=d(C,h),l=_.get(w),l!==void 0&&((ue=l.a)==null||ue.measure(),(b??(b=new Set)).add(l));for(h=0;h<o;h+=1){if(C=e[h],w=d(C,h),l=_.get(w),l===void 0){var E=a.get(w);if(E!==void 0){a.delete(w),_.set(w,E);var H=p?p.next:f;ae(n,p,E),ae(n,E,H),ze(E,H,r),p=E}else{var X=f?f.e.nodes_start:r;p=Ke(X,n,p,p===null?n.first:p.next,C,w,h,s,i,m)}_.set(w,p),k=[],g=[],f=p.next;continue}if(u&&ct(l,C,h,i),(l.e.f&Fe)!==0&&(st(l.e),v&&((se=l.a)==null||se.unfix(),(b??(b=new Set)).delete(l))),l!==f){if(c!==void 0&&c.has(l)){if(k.length<g.length){var z=g[0],L;p=z.prev;var P=k[0],Q=k[k.length-1];for(L=0;L<k.length;L+=1)ze(k[L],z,r);for(L=0;L<g.length;L+=1)c.delete(g[L]);ae(n,P.prev,Q.next),ae(n,p,P),ae(n,Q,z),f=z,p=Q,h-=1,k=[],g=[]}else c.delete(l),ze(l,f,r),ae(n,l.prev,l.next),ae(n,l,p===null?n.first:p.next),ae(n,p,l),p=l;continue}for(k=[],g=[];f!==null&&f.k!==w;)(f.e.f&Fe)===0&&(c??(c=new Set)).add(f),g.push(f),f=f.next;if(f===null)continue;l=f}k.push(l),p=l,f=l.next}if(f!==null||c!==void 0){for(var Y=c===void 0?[]:rt(c);f!==null;)(f.e.f&Fe)===0&&Y.push(f),f=f.next;var W=Y.length;if(W>0){var T=(i&at)!==0&&o===0?r:null;if(v){for(h=0;h<W;h+=1)(x=Y[h].a)==null||x.measure();for(h=0;h<W;h+=1)(I=Y[h].a)==null||I.fix()}qt(n,Y,T)}}v&&jt(()=>{var B;if(b!==void 0)for(l of b)(B=l.a)==null||B.apply()}),t.first=n.first&&n.first.e,t.last=p&&p.e;for(var oe of a.values())it(oe.e);a.clear()}function ct(t,e,n,a){(a&Ne)!==0&&Je(t.v,e),(a&Ce)!==0?Je(t.i,n):t.i=n}function Ke(t,e,n,a,r,s,i,d,m,v,u){var o=(m&Ne)!==0,_=(m&Ot)===0,j=o?_?At(r,!1,!1):Xe(r):r,f=(m&Ce)===0?i:Xe(i),c={i:f,v:j,k:s,a:null,e:null,prev:n,next:a};try{if(t===null){var p=document.createDocumentFragment();p.append(t=nt())}return c.e=qe(()=>d(t,j,f,v),q),c.e.prev=n&&n.e,c.e.next=a&&a.e,n===null?u||(e.first=c):(n.next=c,n.e.next=c.e),a!==null&&(a.prev=c,a.e.prev=c.e),c}finally{}}function ze(t,e,n){for(var a=t.next?t.next.e.nodes_start:n,r=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==a;){var i=Mt(s);r.before(s),s=i}}function ae(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function vt(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=vt(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function Kt(){for(var t,e,n=0,a="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=vt(t))&&(a&&(a+=" "),a+=e);return a}function Qe(t){return typeof t=="object"?Kt(t):t??""}function Vt(t,e,n){var a=t==null?"":""+t;return a===""?null:a}function Ze(t,e=!1){var n=e?" !important;":";",a="";for(var r in t){var s=t[r];s!=null&&s!==""&&(a+=" "+r+": "+s+n)}return a}function De(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Wt(t,e){if(e){var n="",a,r;if(Array.isArray(e)?(a=e[0],r=e[1]):a=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,i=0,d=!1,m=[];a&&m.push(...Object.keys(a).map(De)),r&&m.push(...Object.keys(r).map(De));var v=0,u=-1;const c=t.length;for(var o=0;o<c;o++){var _=t[o];if(d?_==="/"&&t[o-1]==="*"&&(d=!1):s?s===_&&(s=!1):_==="/"&&t[o+1]==="*"?d=!0:_==='"'||_==="'"?s=_:_==="("?i++:_===")"&&i--,!d&&s===!1&&i===0){if(_===":"&&u===-1)u=o;else if(_===";"||o===c-1){if(u!==-1){var j=De(t.substring(v,u).trim());if(!m.includes(j)){_!==";"&&o++;var f=t.substring(v,o).trim();n+=" "+f+";"}}v=o+1,u=-1}}}}return a&&(n+=Ze(a)),r&&(n+=Ze(r,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function Ve(t,e,n,a,r,s){var i=t.__className;if(q||i!==n||i===void 0){var d=Vt(n);(!q||d!==t.getAttribute("class"))&&(d==null?t.removeAttribute("class"):t.className=d),t.__className=n}return s}function He(t,e={},n,a){for(var r in n){var s=n[r];e[r]!==s&&(n[r]==null?t.style.removeProperty(r):t.style.setProperty(r,s,a))}}function re(t,e,n,a){var r=t.__style;if(q||r!==e){var s=Wt(e,a);(!q||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else a&&(Array.isArray(a)?(He(t,n==null?void 0:n[0],a[0]),He(t,n==null?void 0:n[1],a[1],"important")):He(t,n,a));return a}const Jt=Symbol("is custom element"),Qt=Symbol("is html");function V(t){if(q){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;Me(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var r=t.checked;Me(t,"checked",null),t.checked=r}}};t.__on_r=n,Pt(n),Ut()}}function Me(t,e,n,a){var r=Zt(t);q&&(r[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||r[e]!==(r[e]=n)&&(e==="loading"&&(t[Lt]=n),n==null?t.removeAttribute(e):typeof n!="string"&&$t(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Zt(t){return t.__attributes??(t.__attributes={[Jt]:t.nodeName.includes("-"),[Qt]:t.namespaceURI===Rt})}var $e=new Map;function $t(t){var e=$e.get(t.nodeName);if(e)return e;$e.set(t.nodeName,e=[]);for(var n,a=t,r=Element.prototype;r!==a;){n=Bt(a);for(var s in n)n[s].set&&e.push(s);a=Ft(a)}return e}function Z(t,e,n=e){var a=zt(),r=new WeakSet;dt(t,"input",s=>{var i=s?t.defaultValue:t.value;if(i=Ye(t)?Ge(i):i,n(i),ye!==null&&r.add(ye),a&&i!==(i=e())){var d=t.selectionStart,m=t.selectionEnd;t.value=i??"",m!==null&&(t.selectionStart=d,t.selectionEnd=Math.min(m,t.value.length))}}),(q&&t.defaultValue!==t.value||ot(e)==null&&t.value)&&(n(Ye(t)?Ge(t.value):t.value),ye!==null&&r.add(ye)),ut(()=>{var s=e();if(t===document.activeElement){var i=Dt??ye;if(r.has(i))return}Ye(t)&&s===Ge(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function et(t,e,n=e){dt(t,"change",a=>{var r=a?t.defaultChecked:t.checked;n(r)}),(q&&t.defaultChecked!==t.checked||ot(e)==null)&&n(t.checked),ut(()=>{var a=e();t.checked=!!a})}function Ye(t){var e=t.type;return e==="number"||e==="range"}function Ge(t){return t===""?null:+t}function en(t){var e=Xe(0);return function(){return arguments.length===1?(U(e,M(e)+1),arguments[0]):(M(e),t())}}const F=J({buttons:[],joysticks:[],lists:[],sliders:[]});var O=en(()=>F),tn=ee('<tr><td> </td><td><input type="number" class="svelte-njcpkv"/></td><td><input type="number" class="svelte-njcpkv"/></td><td><input type="number" class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input class="svelte-njcpkv"/></td><td><input type="checkbox" class="svelte-njcpkv"/></td><td><input type="checkbox" class="svelte-njcpkv"/></td></tr>'),nn=ee('<input type="number" class="svelte-njcpkv"/><br/>',1),an=ee('<input type="text" class="svelte-njcpkv"/><br/>',1),rn=ee('<tr><td> </td><td><input type="number" class="svelte-njcpkv"/></td><td></td><td><button>+</button></td><td></td><td><button>+</button></td></tr>'),sn=ee("<h2>Configuration</h2> Key Mapping joystick inputs (gamepad -1=all, -2&lt;=disabled) <br/> <table><tbody><tr><td>Name</td><td>Gamepad</td><td>Pad X</td><td>Pad Y</td><td>Key X Pos</td><td>Key X Neg</td><td>Key Y Pos</td><td>Key Y Neg</td><td>Invert X</td><td>Invert Y</td></tr><!></tbody></table> <br/> Buttons:<br/> <table><tbody><tr><td>name</td><td>gamepad</td><td>Pad button</td><td></td><td>key</td><td></td></tr><!></tbody></table>",1);function on(t,e){$(e,!1),ft();var n=sn(),a=A(ce(n),4),r=N(a),s=A(N(r));xe(s,1,()=>O().joysticks,ke,(v,u,o)=>{var _=tn(),j=N(_),f=N(j,!0);S(j);var c=A(j),p=N(c);V(p),S(c);var b=A(c),k=N(b);V(k),S(b);var g=A(b),C=N(g);V(C),S(g);var w=A(g),l=N(w);V(l),S(w);var h=A(w),E=N(h);V(E),S(h);var H=A(h),X=N(H);V(X),S(H);var z=A(H),L=N(z);V(L),S(z);var P=A(z),Q=N(P);V(Q),S(P);var Y=A(P),W=N(Y);V(W),S(Y),S(_),ie(()=>fe(f,M(u).name)),Z(p,()=>O().joysticks[o].gamepad,T=>O(O().joysticks[o].gamepad=T)),Z(k,()=>O().joysticks[o].axes_x,T=>O(O().joysticks[o].axes_x=T)),Z(C,()=>O().joysticks[o].axes_y,T=>O(O().joysticks[o].axes_y=T)),Z(l,()=>O().joysticks[o].key_x_pos,T=>O(O().joysticks[o].key_x_pos=T)),Z(E,()=>O().joysticks[o].key_x_neg,T=>O(O().joysticks[o].key_x_neg=T)),Z(X,()=>O().joysticks[o].key_y_pos,T=>O(O().joysticks[o].key_y_pos=T)),Z(L,()=>O().joysticks[o].key_y_neg,T=>O(O().joysticks[o].key_y_neg=T)),et(Q,()=>O().joysticks[o].invert_x,T=>O(O().joysticks[o].invert_x=T)),et(W,()=>O().joysticks[o].invert_y,T=>O(O().joysticks[o].invert_y=T)),D(v,_)}),S(r),S(a);var i=A(a,6),d=N(i),m=A(N(d));xe(m,1,()=>O().buttons,ke,(v,u,o)=>{var _=rn(),j=N(_),f=N(j,!0);S(j);var c=A(j),p=N(c);V(p),S(c);var b=A(c);xe(b,5,()=>M(u).buttons,ke,(g,C,w)=>{var l=nn(),h=ce(l);V(h),de(),Z(h,()=>M(u).buttons[w],E=>(M(u).buttons[w]=E,Be(()=>O()))),D(g,l)}),S(b);var k=A(b,2);xe(k,5,()=>M(u).keys,ke,(g,C,w)=>{var l=an(),h=ce(l);V(h),de(),Z(h,()=>M(u).keys[w],E=>(M(u).keys[w]=E,Be(()=>O()))),D(g,l)}),S(k),de(),S(_),ie(()=>fe(f,M(u).name)),Z(p,()=>M(u).gamepad,g=>(M(u).gamepad=g,Be(()=>O()))),D(v,_)}),S(d),S(i),D(t,n),te()}const ve=J([]),Oe=J([]),je=J([]),_e=J([]);function un(t,e){$(e,!0);let n=y(e,"updateUsingAnimationFrame",3,!1),a=y(e,"updateUsingInterval",3,!0),r=y(e,"timeout",3,1e3/25),s={},i;function d(u){i=u.target.navigator}function m(){if(i){for(let u of i.getGamepads())if(u){for(let o=0;o<u.buttons.length;o++){if(u.buttons[o].pressed&&(Oe.forEach(_=>_(u,o)),!s[o])){s[o]=!0;for(let _ of ve)if(_(u,o)===!0)break}s[o]&&!u.buttons[o].pressed&&(s[o]=!1,je.forEach(_=>_(u,o)))}_e.forEach(o=>o(u))}}}function v(){m(),requestAnimationFrame(v)}return Ae(()=>{n()?v():a()&&setInterval(m,r())}),me("gamepadconnected",Se,d),te({updateGamepadValues:m})}const pe=J([]),ge=J([]),he=J([]);function ln(t,e){$(e,!1);let n={},a=i=>{for(let d of pe)if(d(i)===!0)break},r=i=>{n[i.key]||a(i),n[i.key]=!0,ge.forEach(d=>{d(i)})},s=i=>{delete n[i.key],he.forEach(d=>{d(i)})};ft(),me("keydown",Se,r),me("keyup",Se,s),te()}const dn=(t,e)=>Math.sqrt(t**2+e**2),fn=(t,e)=>Math.atan2(e,t),cn=(t,e)=>[t*Math.cos(e),t*Math.sin(e)],vn=(t,e)=>Math.min(Math.max(-e,t),e);function Ie(t,e){return t.gamepad===-1||t.gamepad===e.index}function _n(t,e){$(e,!0);let n=y(e,"disabled",3,!1),a=y(e,"onpressed",3,void 0),r=y(e,"onhold",3,void 0),s=y(e,"onrelease",3,void 0),i=y(e,"pressed",15,!1),d=y(e,"input_mapping",19,()=>({name:"",gamepad:-1,buttons:[0],keys:["e"," "]}));const m=()=>{n()||(i(!0),a()&&a()())},v=()=>{!n()&&r()&&r()()},u=()=>{i(!1),s()&&s()()};Ae(()=>{F.buttons.push(d());const j=F.buttons[F.buttons.length-1];function f(l){return j.keys.indexOf(l.key)>-1}function c(l,h){return Ie(j,l)?j.buttons.indexOf(h)>-1:!1}const p=l=>{f(l)&&m()},b=l=>{f(l)&&u()},k=l=>{f(l)&&v()},g=(l,h)=>{c(l,h)&&m()},C=(l,h)=>{c(l,h)&&u()},w=(l,h)=>{c(l,h)&&v()};return pe.push(p),he.push(b),ge.push(k),ve.push(g),je.push(C),Oe.push(w),()=>{pe.splice(pe.indexOf(p),1),he.splice(he.indexOf(b),1),ge.splice(ge.indexOf(k),1),ve.splice(ve.indexOf(g),1),je.splice(je.indexOf(C),1),Oe.splice(Oe.indexOf(w),1),F.buttons.splice(F.buttons.indexOf(j),1)}});var o=Ht(),_=ce(o);lt(_,()=>e.children??Yt),D(t,o),te()}var pn=(t,e,n)=>{e(),setTimeout(()=>{n()},50)},gn=ee("<button><!></button>");function Ee(t,e){$(e,!0);let n=y(e,"disabled",3,!1),a=y(e,"onpressed",3,void 0),r=y(e,"onhold",3,void 0),s=y(e,"onrelease",3,void 0),i=y(e,"pressed",7,!1),d=y(e,"style",3,""),m=y(e,"cssclass",3,"vbutton"),v=y(e,"input_mapping",19,()=>({name:"",gamepad:-1,buttons:[0],keys:["e"," "]}));const u=()=>{n()||(i(!0),a()&&a()())},o=()=>{i(!1),s()&&s()()};_n(t,{get disabled(){return n()},get onpressed(){return a()},get onhold(){return r()},get onrelease(){return s()},get input_mapping(){return v()},get pressed(){return i()},set pressed(_){i(_)},children:(_,j)=>{var f=gn();f.__pointerdown=u,f.__click=[pn,u,o],f.__pointerup=o;var c=N(f);lt(c,()=>e.children),S(f),ie(()=>{re(f,d()),Ve(f,1,(!n()&&i()?"button_clicked ":"")+m())}),D(_,f)},$$slots:{default:!0}}),te()}Te(["pointerdown","click","pointerup"]);var hn=()=>{},yn=ee('<div id="joystick_area" class="svelte-7naxxk"><div class="joystick_container svelte-7naxxk"><div class="joystick_back svelte-7naxxk"></div> <div class="joystick_front svelte-7naxxk"></div></div></div>');function tt(t,e){$(e,!0);let n=y(e,"disabled",3,!1),a=y(e,"size",3,100),r=y(e,"backgroundWidth",3,200),s=y(e,"backgroundHeight",3,200),i=y(e,"color",3,"rgb(106, 191, 163)"),d=y(e,"defaultOpacity",3,.5),m=y(e,"activeOpacity",3,.8),v=y(e,"border",3,1),u=y(e,"borderColor",3,"black"),o=y(e,"position",31,()=>J([0,0])),_=y(e,"style",3,"background-color: rgb(215, 219, 221);"),j=y(e,"input_mapping",19,()=>({name:"Virtual Joystick",gamepad:-1,axes_x:0,axes_y:1,key_x_pos:"d",key_x_neg:"a",key_y_pos:"s",key_y_neg:"w",deadzoneX:.05,deadzoneY:.05,invert_x:!1,invert_y:!1}));y(e,"focussed",11,!1);function f(x){o(x)}const c=a()/2;let p=!1,b=!0,k=le(J(d()));F.joysticks.push(j());const g=F.joysticks[F.joysticks.length-1];function C(x){if(n()||!g.gamepad||!p||!x.target)return;b=!1;const I=x.target.getBoundingClientRect(),B=x.x-I.x,ne=x.y-I.y;w(B,ne)}function w(x,I){let B=x-r()/2,ne=I-s()/2;l(B,ne)}function l(x,I){const B=dn(x,I),ne=fn(x,I);let Pe=vn(B,c),R=cn(Pe,ne),K=R[0]/c,G=R[1]/c;if(Math.abs(K)<g.deadzoneX&&Math.abs(G)<g.deadzoneY){o([0,0]),U(k,d());return}K=Math.abs(K)<1e-6?0:K,G=Math.abs(G)<1e-6?0:G,U(k,m()),o([K,G])}function h(){p=!1,U(k,d()),o([0,0])}let E=[0,0];const H=x=>{if(n())return;let I=!1;g.key_x_pos==x.key?(E[0]=1,I=!0):g.key_x_neg==x.key&&(E[0]=-1,I=!0),g.key_y_pos==x.key?(E[1]=1,I=!0):g.key_y_neg==x.key&&(E[1]=-1,I=!0),I&&(l(E[0]*c,E[1]*c),b=!1)},X=x=>{let I=!1;(g.key_x_pos==x.key||g.key_x_neg==x.key)&&(E[0]=0,I=!0),(g.key_y_pos==x.key||g.key_y_neg==x.key)&&(E[1]=0,I=!0),I&&(l(E[0]*c,E[1]*c),b=!0)},z=x=>{if(n()||!b||!Ie(g,x))return;let I=x.axes[g.axes_x],B=x.axes[g.axes_y];if(g.invert_x&&(I=-I),g.invert_y&&(B=-B),Math.abs(I)<g.deadzoneX&&Math.abs(B)<g.deadzoneY){U(k,d()),o([0,0]);return}U(k,m()),o([I,B])};Ae(()=>(ge.push(H),he.push(X),_e.push(z),()=>{ge.splice(ge.indexOf(H),1),he.splice(he.indexOf(X),1),_e.splice(_e.indexOf(z),1),F.joysticks.splice(F.joysticks.indexOf(g),1)}));const L=()=>{n()||(b=!0)};var P=yn();me("pointerup",Se,h);let Q;P.__pointerdown=x=>{n()||(x.stopImmediatePropagation(),p=!0,C(x))},P.__pointerup=L,P.__pointermove=C,P.__touchstart=[hn],P.__touchend=L,P.__pointerout=L;var Y=N(P);let W;var T=N(Y);let oe;var ue=A(T,2);let se;return S(Y),S(P),ie((x,I,B,ne)=>{Q=re(P,_(),Q,x),W=re(Y,"",W,I),oe=re(T,"",oe,B),se=re(ue,"",se,ne)},[()=>({width:r()+"px",height:s()+"px"}),()=>({left:(r()-a())/2+"px",top:(s()-a())/2+"px"}),()=>({width:a()+"px",height:a()+"px",background:i(),opacity:M(k),border:v()>0?v()+"px solid "+u():0}),()=>({left:o()[0]*c+"px",top:o()[1]*c+"px","margin-top":c/2+"px","margin-left":c/2+"px",transition:"none",width:c+"px",height:c+"px",background:i(),opacity:M(k),border:v()>0?v()+"px solid "+u():0})]),me("pointerleave",P,L),D(t,P),te({update:f})}Te(["pointerdown","pointerup","pointermove","touchstart","touchend","pointerout"]);function mn(t,e){$(e,!0);let n=y(e,"disabled",3,!1),a=y(e,"input_mapping",19,()=>({name:"List",gamepad:-1,axes:[1],sensitivity:.05,buttons:[0],buttons_prev:[12],buttons_next:[13],keys_prev:["ArrowUp","w"],keys_next:["ArrowDown","s"],keys:["e"]}));F.lists.push(a());const r=F.lists[F.lists.length-1];let s=-1;Ae(()=>{const i=v=>{if(!n()){if(a().keys.indexOf(v.key)>-1){e.onpressed&&e.onpressed();return}if(a().keys_next.indexOf(v.key)>-1){e.changeFocus(1);return}a().keys_prev.indexOf(v.key)>-1&&e.changeFocus(-1)}},d=(v,u)=>{if(!(n()||!Ie(r,v))){if(a().buttons.indexOf(u)>-1){e.onpressed&&e.onpressed();return}if(a().buttons_next.indexOf(u)>-1){e.changeFocus(1);return}if(a().buttons_prev.indexOf(u)>-1){e.changeFocus(-1);return}}},m=v=>{if(!(n()||!Ie(r,v)))for(const u of a().axes){const o=v.axes[u];let _=a().sensitivity;if(o<-_&&s!=u){e.changeFocus(-1),s=u;continue}if(o>_&&s!=u){e.changeFocus(1),s=u;continue}o<_&&o>-_&&(s=-1)}};return pe.push(i),ve.push(d),_e.push(m),()=>{pe.splice(pe.indexOf(i),1),ve.splice(ve.indexOf(d),1),_e.splice(_e.indexOf(m),1),F.lists.splice(F.lists.indexOf(r),1)}}),te()}var bn=ee("<li> </li>"),kn=ee("<!> <ul></ul>",1);function xn(t,e){$(e,!0);let n=y(e,"disabled",3,!1),a=y(e,"wrap",3,!0),r=y(e,"style",3,""),s=y(e,"cssclass",3,"vlist"),i=y(e,"selectedIndex",15,0),d=y(e,"focussed",15,0),m=y(e,"input_mapping",19,()=>({name:"List",gamepad:-1,axes:[1],sensitivity:.05,buttons:[0],buttons_prev:[12],buttons_next:[13],keys_prev:["ArrowUp","w"],keys_next:["ArrowDown","s"],keys:["e"]}));function v(p){let b="";return i()===p&&(b+="selected "),d()===p&&(b+="focussed "),b}function u(p){p>=e.items.length&&(p=a()?0:e.items.length-1),p<0&&(p=a()?e.items.length-1:0),d(p)}function o(p){u(d()+p)}function _(){i(d()),e.onpressed&&e.onpressed()}var j=kn(),f=ce(j);mn(f,{changeFocus:o,onpressed:_,get disabled(){return n()},get input_mapping(){return m()}});var c=A(f,2);xe(c,21,()=>e.items,ke,(p,b,k)=>{var g=bn();g.__pointerdown=()=>{n()||(i(k),_())};var C=N(g,!0);S(g),ie(w=>{Ve(g,1,w),fe(C,M(b))},[()=>Qe(v(k))]),me("pointerenter",g,()=>{n()||d(k)}),D(p,g)}),S(c),ie(()=>{re(c,r()),Ve(c,1,Qe(s()))}),D(t,j),te()}Te(["pointerdown"]);function An(t,e){$(e,!0),y(e,"value",11,50),y(e,"min",3,0),y(e,"max",3,100),y(e,"disabled",3,!1);let n=y(e,"input_mapping",19,()=>({name:"Slider",gamepad:-1,sensitivity:.05,axes:0,buttons_neg:[4],buttons_pos:[5],keys_pos:["ArrowRight"],keys_neg:["ArrowLeft"],invert:!1}));y(e,"focussed",11,!1),F.sliders.push(n()),F.sliders[F.lists.length-1],Ae(()=>{}),te()}var wn=ee('<!> <input type="range"/>',1);function Ue(t,e){$(e,!0);let n=y(e,"value",15,50),a=y(e,"min",3,0),r=y(e,"max",3,100),s=y(e,"disabled",3,!1),i=y(e,"input_mapping",19,()=>({name:"Slider",gamepad:-1,sensitivity:.05,axes:0,buttons_neg:[4],buttons_pos:[5],keys_pos:["ArrowRight"],keys_neg:["ArrowLeft"],invert:!1}));y(e,"focussed",11,!1);var d=wn(),m=ce(d);An(m,{get disabled(){return s()},get input_mapping(){return i()},get min(){return a()},get max(){return r()},get value(){return n()},set value(u){n(u)}});var v=A(m,2);V(v),ie(()=>{Me(v,"min",a()),Me(v,"max",r()),v.disabled=s()}),Z(v,n),D(t,d),te()}function En(){document.getElementById("main").requestFullscreen()}var On=ee('<div id="sidenav" class="sidenav"><button class="closebtn">&times;</button> <!></div> <main><!><br/> <!> <!> <!> <br/> <br/> <div style="position: absolute; top: 30px; right: 30px;"><!> <div style="max-width: 200px;"> <br/> </div></div> <br/><br/> <!> <!> <br/><br/> <hr/> <!><br/> <!><br/> <!> <br/><br/> <hr/> <button>Fullscreen</button> <div id="nav_modal" class="modal"><div class="modal-content"><!> <br/> <!></div></div></main>',1);function Cn(t,e){$(e,!0);let n=le(J([0,0])),a=le(J([0,0])),r=le("0"),s=le(!1),i=le(!1),d=le(0);const m=["Main","Second","Third","Settings","Fifth"];function v(){M(s)?u():o()}function u(){U(r,"0"),U(s,!1)}function o(){U(r,"250px"),U(s,!0)}function _(){m[M(d)]==="Settings"&&U(i,!0),u()}var j=On(),f=ce(j);let c;var p=N(f);p.__click=v;var b=A(p,2);{let R=Gt(()=>!M(s));xn(b,{get disabled(){return M(R)},onpressed:_,get items(){return m},wrap:!1,get selectedIndex(){return M(d)},set selectedIndex(K){U(d,K,!0)}})}S(f);var k=A(f,2);let g;var C=N(k);Ee(C,{onpressed:()=>(v(),!0),input_mapping:{name:"Side Nav",gamepad:-1,buttons:[9],keys:["q"]},children:(R,K)=>{de();var G=we('Side Menu "Q"');D(R,G)},$$slots:{default:!0}});var w=A(C,3);un(w,{});var l=A(w,2);ln(l,{});var h=A(l,2);tt(h,{style:"background-color: rgb(6, 23, 28);",size:120,get position(){return M(n)},set position(R){U(n,R,!0)}});var E=A(h),H=A(E,2),X=A(H,3),z=N(X);tt(z,{color:"rgb(236, 97, 159)",input_mapping:{name:"second Virtual Joystick",gamepad:-1,axes_x:2,axes_y:3,key_x_pos:"l",key_x_neg:"j",key_y_pos:"k",key_y_neg:"i",deadzoneX:.05,deadzoneY:.05,invert_x:!1,invert_y:!1},get position(){return M(a)},set position(R){U(a,R,!0)}});var L=A(z,2),P=N(L),Q=A(P,2);S(L),S(X);var Y=A(X,5);Ee(Y,{style:"background-color: rgb(29, 58, 143); color: white;",input_mapping:{name:"blue button",gamepad:-1,buttons:[1],keys:["r"]},children:(R,K)=>{de();var G=we('PRESS CIRCLE OR "R"!');D(R,G)},$$slots:{default:!0}});var W=A(Y,2);Ee(W,{style:"background-color: rgb(247, 167, 018);",input_mapping:{name:"orange button",gamepad:-1,buttons:[3],keys:["t"]},children:(R,K)=>{de();var G=we('PRESS TRIANGLE OR "T"!');D(R,G)},$$slots:{default:!0}});var T=A(W,7);Ue(T,{});var oe=A(T,3);Ue(oe,{});var ue=A(oe,3);Ue(ue,{});var se=A(ue,7);se.__click=[En];var x=A(se,2);let I;var B=N(x),ne=N(B);Ee(ne,{input_mapping:{name:"cancel settings",gamepad:-1,buttons:[1],keys:["Escape","q"]},onpressed:()=>(U(i,!1),!0),children:(R,K)=>{de();var G=we("cancel");D(R,G)},$$slots:{default:!0}});var Pe=A(ne,4);on(Pe,{}),S(B),S(x),S(k),ie((R,K,G)=>{c=re(f,"",c,R),g=re(k,"",g,K),fe(E,` x: ${M(n)[0]??""}`),fe(H,` y: ${M(n)[1]??""} `),fe(P,`x: ${M(a)[0]??""}`),fe(Q,` y: ${M(a)[1]??""}`),I=re(x,"",I,G)},[()=>({width:M(r)}),()=>({"margin-left":M(r),"min-width":"500px"}),()=>({display:M(i)?"block":"none"})]),D(t,j),te()}Te(["click"]);export{Cn as component};
